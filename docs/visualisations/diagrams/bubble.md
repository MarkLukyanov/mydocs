# Пузырьковая диаграмма

Представляет собой две координатные оси и точки, расположенные на координатной плоскости.

Для построения необходимы 1 разрез (измерение), где каждое значение является точкой (пузырьком) и 2 показателя (меры), значения которых являются координатами для точек. Более показателей/разрезов добавить нельзя.

[![image.png](https://book.winsolutions.ru/uploads/images/gallery/2023-08/scaled-1680-/Nqeimage.png)](https://book.winsolutions.ru/uploads/images/gallery/2023-08/Nqeimage.png)

### Вкладка "Данные"

1. Реальные данные(вкл/выкл): переключает отображение реальных и виртуальных данных
2. Построить диапазон по (выбор показателя): позволяет выбрать показатель для построения легенды, с помощью которой можно выбрать крайние значения (на рисунке расположена под диаграммой)
3. Оси (выбор поля): Показатели, значения которых будут использованы в осях диаграммы. Параметры показателя: 
    - Форматирование значений: включить форматирование (например, вместо "1" отобразить "1,00 $"
    - Выбор формата: числовой, процентный, валютный (можно выбрать тип), долевой, степень числа
    - Дополнительные параметры формата: текстовое поле (разместить после числа произвольный текст), уменьшить число знаков после запятой, увеличить число знаков после запятой, разбить число по три символа пробелами
    - Мин/Макс для основных: позволяет выставить лимит значений показателя
4. Пузырьки (выбор поля): Разрез, значения которого будут использованы для расположения и наименования пузырьков. Параметры разреза: 
    - Название из источника(вкл/выкл): в названии показателя будет выведено название столбца (поля) из таблицы в модели данных
    - Пустые значения(вкл/выкл): скрыть либо показать ячейки столбца в которых отсутствуют значения
    - Показать значения (вкл/выкл): отобразить либо скрыть значения разреза на диаграмме
    - Форматирование: позволяет изменить вид и расположение значений разреза на диаграмме
5. Размер пузырька: размер точек может быть задан дополнительным показателем (опционально)(например, на рисунке размер точки зависит от количества заказов, оформленных на одно название товара). Если показатель не добавлять, размер у всех точек будет один. Параметры показателя:
    
    
    - Название из источника(вкл/выкл): в названии показателя будет выведено название столбца (поля) из таблицы в модели данных
    - Тип элемента (базовый/показатель): если выбран "базовый", то все точки будут одинакового, указанного в параметре, размера. Если выбран "показатель" -- точкам будет присвоен размер в диапазоне от минимального к максимальному, в зависимости от значения показателя.
6. SQL: открыть SQL-редактор для этой визуализации
7. Цвет пузырьков: определяет цвет заливки пузырьков со значениями показателей одним из нескольких режимов:  
    
    1. Вручную: выбор одного цвета для всех пузырьков вручную
    2. Градиент: от минимального (цвет 1) к максимальному (цвет 2) значению лимита  
        
        - Легенда отображается в виде градиента
        - Можно настроить промежуточные цвета (аналогично функциональности "Цвет по значению") [![image.png](https://book.winsolutions.ru/uploads/images/gallery/2023-07/scaled-1680-/AvGimage.png)](https://book.winsolutions.ru/uploads/images/gallery/2023-07/AvGimage.png)
    3. Ступенями: настраивается аналогично градиенту, но переходы цветов отсутствуют, отображаются только выбранные цвета. 
        - Диапазон значений разбивается на эти цвета поровну и автоматически.
        - Легенда отображается в автоматическом режиме
    4. По условию: цвет настраивается в зависимости от результата SQL-запроса, например:   
        ```postgresql
        CASE 
        WHEN Car.BRAND = 'Toyota' THEN '1'
        WHEN Car.BRAND = 'Mitsubishi' THEN '2'
        ELSE '3'
        END
        ```
        
        где цифры в одинарных кавычках это выбранные образцы цвета
8. Цвет значения: аналогичная предыдущей настройка цвета для подписей значений
9. Лимит: ограничивает данные для построения диаграммы указанным количеством строк

### Вкладка "Вид"

Аналогично [комбинированной диаграмме](https://book.winsolutions.ru/books/rukovodstvo-polzovatelia/page/kombinirovannaya-diagramma)